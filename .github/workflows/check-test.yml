name: SeaLights Check Markdown Test

on:
  pull_request:

jobs:
  render-check:
    runs-on: ubuntu-latest
    permissions:
      checks: write
      contents: read
      pull-requests: read

    steps:
      - name: Render Markdown Check
        uses: actions/github-script@v6
        with:
          script: |
            const octokit = github.rest;

            const sha = context.payload.pull_request?.head?.sha || context.sha;

            await octokit.checks.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              name: "SeaLights Pull Request Analysis",
              head_sha: sha,
              status: "completed",
              conclusion: "success",
              output: {
                title: "SeaLights Pull Request Analysis",
                summary: `### âœ… SeaLights Pull Request Analysis â€“ *Quality Gate Passed*\n\n#### ğŸ” Conditions Checked\n| Condition | Threshold | Status |\n|-----------|-----------|--------|\n| **New / Modified Coverage** | â‰¥ **50.0%** | âœ… Passed |\n| **Failed Tests** | = **0** | âœ… Passed |\n| **Entire Build** | N/A | âœ… Passed |\n\n---\n\n#### ğŸ§ª Test Summary\n- **774** tests passed\n- **0** failed\n- **0** skipped\n\n---\n\n#### ğŸ“Š Coverage Overview\n- **Overall Method Code Coverage**: **55.58%**\n- âœ… All added/modified code tested in at least one test stage\n- âœ… No code modifications detected\n\n---\n\nğŸ”— [View more details on SeaLights Pull Request Analysis](#)`
              }
            });
